<!DOCTYPE html>
<html>
    <head>
        <title>Bookmark Novels Internal Portal</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" />
        <style>
        html, body {
            font-size: 14px;
            margin: 0.5rem;
        }
        </style>
    </head>
    <body>
        <div class="container">
            <div class="alert alert-warning" role="alert">
                <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>
                This web portal is intended for internal use only. You must be logged in to a Bookmark authorized Github account to access all resources.
            </div>
            <div class="row">
                <div class="nav flex-column nav-pills col-3" id="v-pills-tab" role="tablist" style="padding-left: 15px;">
                    <a class="nav-link active" id="v-pills-all-tab" data-toggle="pill" href="#v-pills-all" role="tab" aria-controls="v-pills-all" aria-expanded="true">Universal Resources</a>
                    <a class="nav-link" id="v-pills-dev-tab" data-toggle="pill" href="#v-pills-dev" role="tab" aria-controls="v-pills-dev" aria-expanded="true">Development</a>
                    <a class="nav-link" id="v-pills-prod-tab" data-toggle="pill" href="#v-pills-prod" role="tab" aria-controls="v-pills-prod" aria-expanded="true">Production</a>
                </div>
                <div class="tab-content col-9" id="v-pills-tabContent">
                    <div class="tab-pane fade show active" id="v-pills-all" role="tabpanel" aria-labelledby="v-pills-all-tab"></div>
                    <div class="tab-pane fade" id="v-pills-dev" role="tabpanel" aria-labelledby="v-pills-dev-tab"></div>
                    <div class="tab-pane fade" id="v-pills-prod" role="tabpanel" aria-labelledby="v-pills-prod-tab">
                        <div class="alert alert-danger" role="alert">
                            <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>
                            Access to all production resources requires additional authorization.
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js"></script>
        <script>
        var all_links = [
            ['Wiki', 'Wiki style knowledge base for everything Bookmark.', 'wiki.dev']
        ];

        var dev_links = [
            ['Consul', 'Check service health and manage global configuration values.', 'consul.dev'],
            ['Goldfish', 'Manage global service secrets. This requires an authorization token provided by your team leader.', 'goldfish.dev'],
            ['SQLBuddy', 'Administrate the shared developer database for all Bookmark services.', 'sql.dev'],
            ['Travis', 'Continuous integration and deployment pipeline for Bookmark services.', 'https://travis-ci.org/Bookmark-Novels']
        ];

        var prod_links = [
            ['Consul', 'Check service health and manage global configuration values.', 'consul'],
            ['Goldfish', 'Manage global service secrets. This requires an authorization token provided by your team leader.', 'goldfish'],
            ['SQLBuddy', 'Administrate the shared production database for all Bookmark services.', 'sql'],
            ['Redis', 'Browse the production Redis instance used for caching non-sensitive information and sharing sessions across nodes.', 'redis'],
            ['Graylog', 'Search and view all logs across production services.', 'graylog']
        ];

        var devops_links = [
            ['DigitalOcean', 'Check service health and manage global configuration values.', 'consul']
        ];

        populate(all_links, '#v-pills-all');
        populate(dev_links, '#v-pills-dev');
        populate(prod_links, '#v-pills-prod');

        function populate(list, anchor) {
            list.sort(function(a, b) {
                return a[0].localeCompare(b[0]);
            }).forEach(function(item) {
                $(anchor).append(makeCard(item[0], item[1], item[2]));
            });
        }

        function makeCard(title, desc, link) {
            link = link.startsWith('https://') || link.startsWith('http://') ? link : 'https://' + link + '.bookmark.services';

            return $('<div>').addClass('card mb-3').append(
                $('<div>').addClass('card-body').append(
                    $('<h4>').addClass('card-title').html(title)
                ).append(
                    $('<p>').addClass('card-text').html(desc)
                )
            ).append(
                $('<div>').addClass('card-footer').append(
                    $('<a>').addClass('card-link btn btn-primary')
                            .html('Access')
                            .attr('href', link)
                )
            );
        }
        </script>
    </body>
</html>
